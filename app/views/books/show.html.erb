<div class="container">
  <div class="blank1 row">
  </div>

  <div class="row">
    <div class="col-md-4">
      <div class="row">
        <%= image_tag @book.picture.url if @book.picture? %>
      </div>
      <br>
      <br>
      <div class="row" id="favorite-<%= @book.id %>" data-no-turbolink="true">
        <%= (current_user.nil? || !current_user.favorite?(@book)) ? render("perusals/favorite", book: @book)
                                                                 : render("perusals/unfavorite", book: @book) %>
      </div>
      <br>
      <div class="row" id="reading-<%= @book.id %>" data-no-turbolink="true">
        <%= render "readings/reading", book: @book %>
      </div>
      <br>
    </div>

    <div class="col-md-8">
      <p><strong><b><big><big><big><%= @book.title %></big></big></big></b></strong></p>
      <p>-- <%= link_to @book.author, "#" %> --</p>
      <% unless current_user.nil? %>
        <div>
          <%= rating_for @book, Settings.rate.content, disable_after_rate: false, enable_half: true,
            cancel_place: Settings.place.right, cancel_hint: t(:cancel_vote), imdb_avg: true,
            target: "#hintDiv1", targetText: t(:content_rate), targetType: Settings.rate.type.score %>
          <span>
            <%= RatingCache.content_rate(@book).first.try(:avg) %><%= t :by %>
            <%= Rate.content_raters(@book).count %> user(s)
          </span>
          <div id="hintDiv1"></div>
          <br>
          <%= rating_for @book, Settings.rate.design, disable_after_rate: false, enable_half: true,
            cancel_place: Settings.place.right, cancel_hint: t(:cancel_vote), imdb_avg: true,
            target: "#hintDiv2", targetText: t(:design_content), targetType: Settings.rate.type.score %>
          <span>
            <%= RatingCache.design_rate(@book).first.try(:avg) %><%= t :by %>
            <%= Rate.design_raters(@book).count %><%= t :user %>
          </span>
          <div id="hintDiv2"></div>
        </div>
      <% end %>
      <br><hr>
      <p class="blue-violet"><big><big><%= t :about_this_book %></big></big></p>
      <p><%= @book.description %></p>
    </div>

    <hr>
  </div>

  <br><hr>
  <div class="blank2 row">
  </div>

  <div class="row" data-no-turbolink="true">
    <p class="blue-violet"><big><big><%= t :related_book %></big></big></p>
    <table class="table">
      <tr>
        <% @books.each do |book| %>
          <td class="center_td">
            <%= link_to book_path(book) do %>
              <%= image_tag book.picture.url if book.picture? %>
            <% end %>
            <br>
            <%= link_to book.title, book_path(book) %>
          </td>
        <% end %>
      </tr>
    </table>
  </div>

  <br><hr>
  <div class="blank2 row">
  </div>

  <div class="row">
    <p class="blue-violet"><big><big><%= t :product_details %></big></big></p>
    <%= render "books/details", book: @book %>
  </div>

  <br><hr>
  <div class="blank2 row">
  </div>

  <div class="row" id="reviews">
    <p class="blue-violet"><big><big><%= t :customer_reviews %></big></big></p>
    <%= render partial: "reviews/review", collection: @reviews, as: :review %>
  </div>

  <% unless current_user.nil? || current_user.already_reviewed?(@book) %>
    <br><hr>
    <div class="your-review row">
      <div class="blank2 col-md-12">
      </div>

      <p class="blue-violet"><big><big><%= t :your_review %></big></big></p>
      <div class="col-md-12 padding-left-50">:
        <div class="col-md-6">
          <%= render "reviews/form" %>
        </div>
      </div>
      <br>
    </div>
  <% end %>

  <br><hr>
  <div class="blank2 row">
  </div>

  <div class="suggestion row">
    <p>
      <%= t :please %>
      &nbsp;
      <big><big><%= link_to t(:_login), login_path %></big></big>
      <%= t :login_suggestion %>
    </p>
  </div>
  <br>

  <div class="blank3 row" id="blank3">
  </div>
</div>
